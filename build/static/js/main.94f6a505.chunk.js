(this["webpackJsonpmy-messenger"]=this["webpackJsonpmy-messenger"]||[]).push([[0],{125:function(e,t){e.exports="data:image/png;base64,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"},153:function(e,t,a){e.exports=a(208)},205:function(e,t){},208:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),l=a(5),i=a(11),s=a.n(i),m=a(16),u=a(266),p=a(253),f=a(248),g=a(259),d=a(252),h=a(260),b=a(244),E=a(246),v=a(247),O=a(19),x=a.n(O),j=a(26),y=a(31),w=a(14),S=a(125),k=a.n(S),A=a(50),I=a(60),C=a.n(I);function T(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=new Date(e),n=new Date,r=C()(a);if(a.getDay()===n.getDay())return!0===t?"Today "+r.format("hh:mm a"):r.format("hh:mm a");var c=(Date.now()-a.getTime())/864e5;return c<7?r.format("dddd hh:mm a"):a.getFullYear()===n.getFullYear()?r.format("MMM D hh:mm a"):r.format("MMM D YYYY")}function N(e,t){var a=e.filter((function(e){return e.userEmail===t.email}))[0].lastSeen,n=C()(a).fromNow();return"Active "+("a few seconds ago"===n?"now":n)}function U(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(navigator.onLine)return!0;var t="Please check your network connection";return console.log(t),e&&alert(t),!1}function D(){return r.a.createElement(b.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(y.b,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var M=Object(E.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{width:e.spacing(10),height:e.spacing(10),margin:"auto"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function P(e){var t=M(),a=Object(w.g)(),c=Object(n.useState)(""),o=Object(l.a)(c,2),i=o[0],E=o[1],O=Object(n.useState)(""),S=Object(l.a)(O,2),A=S[0],I=S[1],C=Object(n.useState)(""),T=Object(l.a)(C,2),N=T[0],P=T[1],R=Object(n.useState)(!1),L=Object(l.a)(R,2),Q=L[0],W=L[1],B=Object(n.useState)({}),G=Object(l.a)(B,2),Y=(G[0],G[1],Object(n.useState)({})),K=Object(l.a)(Y,2),J=(K[0],K[1]);function z(){return(z=Object(m.a)(s.a.mark((function e(t){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),U(!0)){e.next=3;break}return e.abrupt("return");case 3:return P(""),n="".concat("http://18.216.231.48:3001","/api/v1"),r={method:"post",url:"".concat(n,"/users/signin"),data:{email:i,password:A}},I(""),W(!0),e.prev=8,e.next=11,x()(r);case 11:(c=e.sent).data&&(console.log(c.data),J(c.data),W(!1),a.push("/home",c.data)),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(8),console.log(e.t0),e.t0.response&&P(e.t0.response.data),W(!1);case 20:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}return r.a.createElement(v.a,{component:"main",maxWidth:"xs"},r.a.createElement(j.a,null,r.a.createElement("title",null," Sign In")),r.a.createElement(f.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(u.a,{className:t.avatar,src:k.a}),r.a.createElement(b.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,autoComplete:"off"},r.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoFocus:!0,onChange:function(e){return E(e.target.value)}}),r.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:function(e){return I(e.target.value)}}),N&&r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement("div",{style:{color:"red"}},N)),r.a.createElement(p.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,style:{textTransform:"none"},onClick:function(e){return z.apply(this,arguments)}},Q?"Singing In..":"Sign In"),r.a.createElement(d.a,{container:!0},r.a.createElement(d.a,{item:!0,style:{margin:"auto"}},r.a.createElement(y.b,{to:"/signup",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(h.a,{mt:8},r.a.createElement(D,null)))}var R=Object(E.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function L(){var e=R(),t=Object(w.g)(),a=Object(n.useState)(""),c=Object(l.a)(a,2),o=c[0],i=c[1],u=Object(n.useState)(""),h=Object(l.a)(u,2),E=h[0],O=h[1],S=Object(n.useState)(""),k=Object(l.a)(S,2),I=k[0],C=k[1],T=Object(n.useState)(""),N=Object(l.a)(T,2),D=N[0],M=N[1],P=Object(n.useState)(""),L=Object(l.a)(P,2),Q=L[0],W=L[1],B=Object(n.useState)(!1),G=Object(l.a)(B,2),Y=G[0],K=G[1],J=Object(n.useState)(""),z=Object(l.a)(J,2),F=z[0],V=z[1],X=Object(n.useState)(""),q=Object(l.a)(X,2),H=q[0],Z=q[1],$=Object(n.useState)(""),_=Object(l.a)($,2),ee=_[0],te=_[1],ae=Object(n.useState)(""),ne=Object(l.a)(ae,2),re=ne[0],ce=ne[1],oe=Object(n.useState)(""),le=Object(l.a)(oe,2),ie=le[0],se=le[1],me=Object(n.useState)(""),ue=Object(l.a)(me,2),pe=ue[0],fe=ue[1],ge=function(){V(""),Z(""),te(""),ce(""),fe("")},de=function(e){var t,a=Object(A.a)(e);try{for(a.s();!(t=a.n()).done;){if(" "!==t.value)return!1}}catch(n){a.e(n)}finally{a.f()}return!0};function he(){return(he=Object(m.a)(s.a.mark((function e(a){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),U(!0)){e.next=3;break}return e.abrupt("return");case 3:if(ge(),!1!==Ee()){e.next=6;break}return e.abrupt("return");case 6:return n="".concat("http://18.216.231.48:3001","/api/v1"),r={name:o,email:E,phoneNumber:de(I)?" ":I,password:D},c={method:"post",url:"".concat(n,"/auth/account/verify"),data:r},K(!0),e.prev=10,e.next=13,x()(c);case 13:200===e.sent.status&&(K(!1),t.push("/signup/email-verify",r)),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(10),console.log(e.t0),e.t0.response.data&&(console.log(e.t0.response.data),be(e.t0.response.data),fe(e.t0.response.data)),K(!1);case 22:case"end":return e.stop()}}),e,null,[[10,17]])})))).apply(this,arguments)}var be=function(e){e.search(/name/i)>-1&&V(e),e.search(/email/i)>-1&&Z(e),e.search(/phone/i)>-1&&te(e)};function Ee(){if(""===o)return V("Name field is required"),!1;if(""===E)return Z("Email field is required"),!1;if(I.length>0){if(11!==I.length)return te("Phone number must contain 11 digits"),!1;if(!function(e){if(" "===e)return!0;return/^01[3456789]{1}[0-9]{8}$/.test(e)}(I))return te('Phone number is invalid. A valid phone number should be in "01712******" format'),!1}return""===D?(ce("Password field is required"),!1):D!==Q?(fe("Password does not match"),!1):(fe(""),!0)}return r.a.createElement(v.a,{component:"main",maxWidth:"xs"},r.a.createElement(j.a,null,r.a.createElement("title",null,"Sign Up")),r.a.createElement(f.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(b.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:e.form,autoComplete:"off"},r.a.createElement(d.a,{container:!0,spacing:2},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(g.a,{name:"name",value:o,variant:"outlined",error:""!==F,required:!0,fullWidth:!0,id:"name",label:"Name",autoFocus:!0,onChange:function(e){i(e.target.value),""!==e.target.value&&V("")}})),F&&r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement("div",{style:{color:"red"}},F)),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(g.a,{variant:"outlined",value:E,required:!0,error:""!==H,fullWidth:!0,id:"email",label:"Email Address",name:"email",onChange:function(e){O(e.target.value),""!==e.target.value&&Z("")}})),H&&r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement("div",{style:{color:"red"}},H)),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(g.a,{variant:"outlined",value:I,required:!1,error:""!==ee,fullWidth:!0,id:"phoneNo",label:"Phone Number",name:"phoneNo",onChange:function(e){C(e.target.value),""!==e.target.value&&te("")}})),ee&&r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement("div",{style:{color:"red"}},ee)),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(g.a,{variant:"outlined",required:!0,error:""!==re,fullWidth:!0,value:D,name:"password",label:"Password",type:"password",id:"password",onChange:function(e){M(e.target.value),""!==e.target.value&&ce("")}})),re&&r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement("div",{style:{color:"red"}},re)),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(g.a,{variant:"outlined",required:!0,error:""!==ie,fullWidth:!0,value:Q,name:"password2",label:"Repeat your Password",type:"password",id:"password2",onChange:function(e){W(e.target.value),""!==e.target.value&&se("")}})),pe&&r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement("div",{style:{color:"red"}},pe))),r.a.createElement(p.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,style:{textTransform:"none"},onClick:function(e){return he.apply(this,arguments)}},Y?"Signing Up..":"Sign Up"),r.a.createElement(d.a,{container:!0,justify:"flex-end"},r.a.createElement(d.a,{item:!0},r.a.createElement(y.b,{to:"/signin",variant:"body2"},"Already have an account? Sign in"))))))}var Q=a(28),W=a(263),B=a(20),G=a(251),Y=a(265),K=a(136),J=a(267),z=a(130),F=a.n(z),V=Object(E.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},paper:{position:"sticky"},avatar:{margin:e.spacing(2),flexGrow:1},title:{flexGrow:1}}}));function X(e){var t=V(),a=Object(w.g)(),c=Object(n.useState)(null),o=Object(l.a)(c,2),i=o[0],s=o[1],m=Object(n.useState)(!1),f=Object(l.a)(m,2),g=f[0],h=f[1];return g?r.a.createElement(w.a,{to:{pathname:"/signin",state:e.owner}}):r.a.createElement("div",{className:t.root},r.a.createElement(G.a,{className:t.paper,elevation:1},r.a.createElement(d.a,{container:!0,direction:"row"},r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(Y.a,{title:e.owner.name,placement:"right"},r.a.createElement(u.a,{alt:e.owner.name,src:"".concat("http://18.216.231.48:3001","/").concat(e.owner.profilePicUrl)}))),r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(b.a,{variant:"h6",className:t.title},"Chats")),r.a.createElement(d.a,{item:!0,xs:4,style:{margin:"auto"}},r.a.createElement(p.a,null,r.a.createElement(F.a,{color:"primary",onClick:function(e){return s(e.currentTarget)}})),r.a.createElement(K.a,{id:"simple-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:function(){s(null)}},r.a.createElement(J.a,{onClick:function(){console.log("go to profile"),a.push("/profile",e.owner)}},"Profile"),r.a.createElement(J.a,{onClick:function(){console.log("user will logged out"),localStorage.setItem("token-".concat(e.owner.email),""),localStorage.setItem("chatList-".concat(e.owner.email),null),h(!0)}},"Logout"))))))}var q=a(15),H=a(255),Z=a(132),$=a.n(Z),_=a(254),ee=a(131),te=a.n(ee),ae=Object(E.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},paper:{paddingLeft:e.spacing(2)},avatar:{margin:e.spacing(2),flexGrow:1},title:{flexGrow:1,textAlign:"left",fontWeight:"bold"}}}));function ne(e){var t=ae(),a=Object(n.useState)(""),c=Object(l.a)(a,2),o=c[0],i=c[1],p=function(){var t=Object(m.a)(s.a.mark((function t(){var a,n,r,c,o,l=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>0&&void 0!==l[0]?l[0]:e.user,n="".concat("http://18.216.231.48:4001","/api/v1"),r={method:"GET",url:"".concat(n,"/status/")},t.prev=3,t.next=6,x()(r);case 6:(c=t.sent).data&&(console.log("updated status received ",a),o=N(c.data,a),i(o)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){p(e.user);var t=setInterval(p,5e3);return function(){i(""),clearInterval(t)}}),[e.user]),Object(B.isEmpty)(e.user)?r.a.createElement("p",null):r.a.createElement("div",{className:t.root},r.a.createElement(G.a,{className:t.paper,elevation:1},r.a.createElement(d.a,{container:!0,direction:"row"},r.a.createElement(d.a,{item:!0,xs:3,sm:2,md:1},r.a.createElement(u.a,{alt:e.user.name,src:e.user.profilePicUrl?"".concat("http://18.216.231.48:3001","/").concat(e.user.profilePicUrl):e.user.name})),r.a.createElement(d.a,{container:!0,item:!0,xs:9,sm:10,md:11,direction:"col"},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(b.a,{className:t.title},e.user.name)),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(b.a,{style:{fontSize:"12px"}},o))))))}var re="".concat("http://18.216.231.48:4001"),ce=te()(re),oe=Object(E.a)((function(e){return{root:{flexGrow:1,marginBottom:e.spacing(0)},bottomNavBar:{width:"100%"}}})),le=[];function ie(e){var t=oe(),a=Object(n.useState)([]),c=Object(l.a)(a,2),o=(c[0],c[1],Object(n.useState)(!1)),i=Object(l.a)(o,2),u=(i[0],i[1],Object(n.useState)(Date.now())),p=Object(l.a)(u,2),f=(p[0],p[1]),h=Object(n.useState)(!1),b=Object(l.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(l.a)(O,2),y=j[0],w=j[1],S=Object(n.useState)(!1),k=Object(l.a)(S,2),A=k[0],I=k[1],C=Object(n.useState)(""),T=Object(l.a)(C,2),N=(T[0],T[1]);function U(t){t.preventDefault();var a=document.getElementById("message"),n=a.value.trim();if(a.value="",!Object(B.isEmpty)(n)){var r={from:e.owner.email,to:e.user.email,text:n,time:Date.now()};!function(e){M.apply(this,arguments)}(r),v(!0),D(r)}}function D(e){le.push(e),f(Date.now()),console.log("message saved")}function M(){return(M=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ce.emit("chat",t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){return ce.on("connect",(function(){var t=localStorage.getItem("token-".concat(e.owner.email));console.log("token key: token-".concat(e.owner.email,", value: ").concat(t)),ce.emit("token",t)})),ce.on("chat",(function(t){console.log("message received"),console.log(t),t.to===e.owner.email&&(w(!0),D(t))})),ce.on("heart-bit",(function(t){console.log(t),t.to===e.owner.email&&D(t)})),setInterval((function(){ce.emit("heart-bit",e.owner.email)}),2e4),function(){console.log("connect will be closed"),ce.disconnect()}}),[]);var P=function(){var e=Object(m.a)(s.a.mark((function e(t,a){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"get",url:"".concat("http://18.216.231.48:4001","/api/v1/messages"),params:{from:t,to:a,skip:le.length}},I(!0),N(""),e.prev=3,e.next=6,x()(n);case 6:(r=e.sent).data&&(console.log(r.data),le=[].concat(Object(Q.a)(r.data),Object(Q.a)(le)),f(Date.now()),0===r.data.length&&localStorage.setItem("noMoreData","true"),console.log(le.length),I(!1)),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),e.t0.response&&N("something went wrong!"),I(!1);case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){if(!Object(B.isEmpty)(e.user))return console.log("fetchCalled"),le=[],localStorage.setItem("maxScrollHeight",0),localStorage.setItem("fetchForScroll","false"),localStorage.setItem("noMoreData","false"),P(e.owner.email,e.user.email),console.log("fetch sesh"),function(){localStorage.setItem("fetchForScroll","false"),localStorage.setItem("noMoreData","false")};console.log("user is empty")}),[e.user]);var R=r.a.createElement("div",null,!0===A?r.a.createElement("div",{style:{textAlign:"center",paddingTop:"30%"}},r.a.createElement(_.a,null)):r.a.createElement(se,{messageList:le,owner:e.owner,user:e.user,handleScroll:P,messageSent:E,resetMessageSent:function(){return v(!1)},messageGot:y,resetMessageGot:function(){return w(!1)}}));return Object(B.isEmpty)(e.user)?r.a.createElement("p",null):r.a.createElement("div",{className:t.root},r.a.createElement(d.a,{container:!0,direction:"col",spacing:1},r.a.createElement(d.a,{item:!0,xs:12,style:{marginTop:"0px"}},Object(B.isEmpty)(e.user)?"":r.a.createElement(ne,{user:e.user})),r.a.createElement(d.a,{item:!0,xs:12,style:{paddingLeft:"16px"}},R),r.a.createElement(d.a,{container:!0,item:!0,xs:12,style:{position:"fixed",bottom:"0",paddingLeft:"16px",marginBottom:"3px",width:"67%"}},r.a.createElement(d.a,{item:!0,xs:11},r.a.createElement(g.a,{id:"message",placeholder:"Type a message",variant:"outlined",fullWidth:!0,autoComplete:"off",onKeyUp:function(e){e.target.value,"Enter"===e.key&&(U(e),e.target.value="")}})),r.a.createElement(d.a,{item:!0,xs:1,style:{textAlign:"left"}},r.a.createElement(H.a,{"aria-label":"send",style:{color:"blue"},onClick:U},r.a.createElement($.a,null))))))}function se(e){var t=0;if(Object(n.useEffect)((function(){var a=document.getElementById("chatBox");if(a){var n=localStorage.getItem("fetchForScroll");if(console.log(e.messageGot),!0===e.messageSent||!0===e.messageGot)a.scrollTop=a.scrollHeight,e.resetMessageSent(),e.resetMessageGot();else if("false"===n)a.scrollTop=a.scrollHeight;else if("true"===n){var r=localStorage.getItem("maxScrollHeight");a.scrollTop=a.scrollHeight,t=a.scrollTop,localStorage.setItem("maxScrollHeight",t),a.scrollTop=a.scrollTop-r,"true"===localStorage.getItem("noMoreData")&&(a.scrollTop=0)}}return function(){e.resetMessageSent(),e.resetMessageGot()}})),Object(B.isEmpty)(e.user)||0===e.messageList.length)return r.a.createElement("p",null);return r.a.createElement("div",null,r.a.createElement(d.a,{id:"chatBox",container:!0,direction:"col",style:{maxHeight:"80vh",overflow:"auto"},spacing:2,onScroll:function(a){var n=a.target;n.scrollTop>t&&(t=n.scrollTop,localStorage.setItem("maxScrollHeight",t)),"true"!==localStorage.getItem("noMoreData")?0===n.scrollTop&&(console.log("scrolled to top"),localStorage.setItem("fetchForScroll","true"),e.handleScroll(e.owner.email,e.user.email)):console.log("no more data")}},function(){var t,a,n,r=[],c=null,o=Object(A.a)(e.messageList);try{for(o.s();!(t=o.n()).done;){var l=t.value;(l.from===e.owner.email&&l.to===e.user.email||l.from===e.user.email&&l.to===e.owner.email)&&((null===c||!1===(a=new Date(c),n=new Date(l.time),a.getDay()===n.getDay()&&a.getMonth()===n.getMonth()&&a.getFullYear()===n.getFullYear()))&&r.push(Object(q.a)(Object(q.a)({},l),{},{printDate:!0})),r.push(l),c=l.time)}}catch(i){o.e(i)}finally{o.f()}return r}().map((function(t,a){return r.a.createElement(d.a,{key:a.toString(),item:!0,xs:12},!0===t.printDate?(n=t.time,r.a.createElement("div",{style:{textAlign:"center"}},T(n,!0))):t.from!==e.owner.email?r.a.createElement(h.a,{display:"flex",justifyContent:"flex-start",style:{width:"50%"}},r.a.createElement(Y.a,{title:T(t.time),placement:"left"},r.a.createElement(h.a,{style:{backgroundColor:"#E8E8E8",borderStyle:"hidden",padding:"8px",borderRadius:"5px"}},t.text))):r.a.createElement(h.a,{display:"flex",justifyContent:"flex-end",style:{marginRight:"32px"}},r.a.createElement(Y.a,{title:T(t.time),placement:"left"},r.a.createElement(h.a,{style:{color:"white",backgroundColor:"#0052cc",borderStyle:"hidden",padding:"8px",borderRadius:"5px",maxWidth:"50%"}},t.text))));var n}))))}var me=a(256),ue=Object(E.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},paper:{},avatar:{margin:e.spacing(2),flexGrow:1},title:{},list:{marginTop:e.spacing(1)}}}));function pe(e){var t=ue();return 0===e.userList.length?r.a.createElement("p",null,"loading..."):r.a.createElement("div",{className:t.root},r.a.createElement(G.a,{className:t.paper,elevation:1},r.a.createElement(d.a,{container:!0,direction:"col"},r.a.createElement(r.a.Fragment,null,e.userList.map((function(a,n){return r.a.createElement(d.a,{key:n.toString(),container:!0,item:!0,direction:"row",className:t.list,style:{backgroundColor:"#f2f2f2"},onClick:function(){e.handleUser(a)}},r.a.createElement(d.a,{item:!0,xs:3},r.a.createElement(u.a,{alt:a.name,src:a.profilePicUrl?"".concat("http://18.216.231.48:3001","/").concat(a.profilePicUrl):a.name})),r.a.createElement(d.a,{item:!0,xs:9,style:{margin:"auto"}},r.a.createElement(h.a,null,r.a.createElement(b.a,{variant:"inherit"},a.name))))})))),r.a.createElement(me.a,null)))}var fe=a(262),ge=a(257),de=a(6),he=Object(de.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{top:0,left:0,width:"90%",height:"90%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(ge.a),be=(Object(de.a)((function(e){return{root:{width:22,height:22,border:"2px solid ".concat(e.palette.background.paper)}}}))(u.a),Object(E.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}}}})));function Ee(e){var t=be();return r.a.createElement("div",{className:t.root},r.a.createElement(he,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r.a.createElement(u.a,{alt:e.src.name,src:e.src.profilePicUrl?"".concat("http://18.216.231.48:3001","/").concat(e.src.profilePicUrl):e.src.name})))}var ve=Object(E.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper},menuButton:{marginRight:e.spacing(2)},paper:{},avatar:{margin:e.spacing(2),flexGrow:1},title:{},list:{marginTop:e.spacing(1),backgroundColor:"#f5f2ed"}}}));function Oe(e){return r.a.createElement(d.a,{container:!0},r.a.createElement(d.a,{item:!0,md:10},r.a.createElement(b.a,{variant:"subtitle2"},e.message.text.length<=30?e.message.text:e.message.text.substr(0,30)+"...")),r.a.createElement(d.a,{item:!0,md:2},r.a.createElement(fe.a,{smDown:!0},r.a.createElement(b.a,{variant:"subtitle2"},function(e){var t=new Date(e),a=new Date,n=C()(t);return t.getDay()===a.getDay()?n.format("hh:mm a"):(Date.now()-t.getTime())/864e5<7?n.format("ddd"):t.getFullYear()===a.getFullYear()?n.format("MMM D"):n.format("MMM D YYYY")}(e.message.time)))))}var xe=[];function je(e){var t=ve(),a=Object(n.useRef)([]),c=Object(n.useState)(!1),o=Object(l.a)(c,2),i=o[0],p=(o[1],Object(n.useState)("")),f=Object(l.a)(p,2),g=(f[0],f[1],Object(n.useState)([])),h=Object(l.a)(g,2),E=h[0],v=h[1];function O(t){return e.userList.filter((function(e){return e.email===t}))[0]}function j(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===a.current.length)return console.log("length: ",a.current.length),!1;var n=N(a.current,e);return console.log("status: ",n,t),"Active now"===n}Object(n.useEffect)((function(){if(!Object(B.isEmpty)(e.owner)){var t=localStorage.getItem("chatList-".concat(e.owner.email)),a=JSON.parse(t);console.log("parsedChatList: ",a,typeof a),null!==a&&(v(Object(Q.a)(a)),e.needToShowChatBox&&a.length>0&&e.handleUser(a[0].to))}}),[e.owner]),Object(n.useEffect)((function(){if(0!==a.current.length){var e=E.map((function(e){return Object(q.a)(Object(q.a)({},e),{},{activeStatus:j(e.to)})}));v(Object(Q.a)(e))}}),[a.current]);var y=function(){var e=Object(m.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("http://18.216.231.48:4001","/api/v1"),n={method:"GET",url:"".concat(t,"/status")},e.prev=2,e.next=5,x()(n);case 5:(r=e.sent).data&&(console.log("updated status received for chat list",r.data),a.current=Object(Q.a)(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();function w(t){return t.map((function(t){if(t.to===e.owner.email){var a=O(t.from);return Object(q.a)(Object(q.a)({},t),{},{activeStatus:j(a,!0),to:a})}var n=O(t.to);return Object(q.a)(Object(q.a)({},t),{},{text:"You: "+t.text,activeStatus:j(n,!0),to:n})}))}var S=function(){var t=Object(m.a)(s.a.mark((function t(){var a,n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={method:"GET",url:"".concat("http://18.216.231.48:4001","/api/v1/lastMessages"),params:{owner:JSON.stringify(e.owner),userList:JSON.stringify(e.userList),skip:0}},console.log(a),t.prev=2,t.next=5,x()(a);case 5:(n=t.sent).data&&(r=w(n.data),Object(B.isEqual)(xe,r)?console.log("no update for recent messages"):(console.log("update: "),console.log(r),xe=r,v(Object(Q.a)(r)),localStorage.setItem("chatList-".concat(e.owner.email),JSON.stringify(r)),e.needToShowChatBox&&r.length>0&&e.handleUser(r[0].to))),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0),t.t0.response;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){y();var e=setInterval(y,5e3);return function(){return clearInterval(e)}}),[]),Object(n.useEffect)((function(){if(0!==e.userList.length){setTimeout(S,2e3);var t=setInterval((function(){return S()}),2e3);return function(){clearInterval(t)}}console.log("no fetch")}),[e.userList]),i?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(_.a,null)):r.a.createElement("div",{className:t.root},r.a.createElement(G.a,{className:t.paper,elevation:1},r.a.createElement(d.a,{container:!0,direction:"col"},r.a.createElement(r.a.Fragment,null,E.map((function(a,n){return r.a.createElement(d.a,{key:n.toString(),container:!0,spacing:1,item:!0,direction:"row",className:t.list,onClick:function(){e.handleUser(a.to)}},a.activeStatus?r.a.createElement(d.a,{item:!0,xs:6,sm:4,md:2},r.a.createElement(Ee,{src:a.to})):r.a.createElement(d.a,{item:!0,xs:6,sm:4,md:2,style:{padding:"8px"}},r.a.createElement(u.a,{alt:a.to.name,src:a.to.profilePicUrl?"".concat("http://18.216.231.48:3001","/").concat(a.to.profilePicUrl):a.to.name})),r.a.createElement(d.a,{item:!0,container:!0,direction:"col",xs:6,sm:8,md:10,zeroMinWidth:!0},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(b.a,{variant:"body1",style:{fontWeight:"bold"}},a.to.name)),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(fe.a,{xsDown:!0},r.a.createElement(Oe,{message:a})))))})))),r.a.createElement(me.a,null)))}var ye=Object(E.a)((function(e){return{root:{margin:e.spacing(0),maxHeight:"100%"},paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},list:{marginTop:e.spacing(0),maxHeight:"85vh",overflow:"auto"},option:{marginTop:e.spacing(2)}}}));function we(e){var t=ye(),a=Object(w.g)(),c=Object(n.useState)(!0),o=Object(l.a)(c,2),i=o[0],u=o[1],f=Object(n.useState)({}),g=Object(l.a)(f,2),h=g[0],b=g[1],E=Object(n.useState)({}),v=Object(l.a)(E,2),O=v[0],y=v[1],S=Object(n.useState)([]),k=Object(l.a)(S,2),A=k[0],I=k[1],C=Object(n.useState)(!1),T=Object(l.a)(C,2),N=T[0],D=(T[1],Object(n.useState)(!1)),M=Object(l.a)(D,2),P=M[0],R=M[1],L=Object(n.useState)(""),G=Object(l.a)(L,2),Y=G[0],K=G[1],J=Object(n.useState)(1),z=Object(l.a)(J,2),F=z[0],V=z[1],q=Object(n.useState)(!1),H=Object(l.a)(q,2),Z=H[0],$=H[1];function _(e){b(e)}function ee(e,t){return t.filter((function(t){if(t.email!==e.email)return console.log(t.email,e.email),t}))}var te=function(e,t){t.map((function(t){t.email===e.email&&y(t)}))},ae=function(){var e=Object(m.a)(s.a.mark((function e(t,a){var n,r,c,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("http://18.216.231.48:3001","/api/v1"),r={method:"get",url:"".concat(n,"/users"),params:{page:F,limit:15},headers:{Authorization:"Bearer ".concat(t)}},R(!0),K(""),e.prev=4,e.next=7,x()(r);case 7:(c=e.sent).data&&(console.log(c.data),te(a,c.data),o=ee(a,c.data),l=A.concat(o),console.log(l.length),I(Object(Q.a)(l)),V(F+1),R(!1)),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0),e.t0.response&&K("something went wrong!"),R(!1);case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=a.location.state;console.log(e);var t=e.profile;localStorage.setItem("token-".concat(t.email),e.accessToken),localStorage.setItem("userId-".concat(t.email),e.profile._id),y(t),U()?ae(e.accessToken,t):$(!0)}),[]),Object(B.isEmpty)(O)||void 0===O?r.a.createElement("div",null,r.a.createElement(j.a,null,r.a.createElement("title",null," Easy Chat"))):r.a.createElement("div",null,r.a.createElement(j.a,null,r.a.createElement("title",null," Easy Chat")),r.a.createElement(W.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:Z,onClose:function(){return $(!1)},message:"There is no internet connection! Please check your internet connection and try again",autoHideDuration:2e3}),r.a.createElement("div",{className:t.root},r.a.createElement(d.a,{container:!0,direction:"row",spacing:1},r.a.createElement(d.a,{container:!0,item:!0,direction:"col",xs:4,spacing:1},r.a.createElement(d.a,{item:!0,xs:12,style:{height:"40px",width:"33%",position:"fixed",marginTop:"0px"}},r.a.createElement(X,{owner:O})),r.a.createElement(d.a,{container:!0,item:!0,xs:12,style:{height:"40px",width:"33%",position:"fixed",marginTop:"42px",textAlign:"center"}},r.a.createElement(d.a,{item:!0,xs:6},r.a.createElement(p.a,{variant:"contained",fullWidth:!0,style:{textTransform:"none"},color:!0===i?"primary":"default",onClick:function(){return u(!0)}},"Chats")),r.a.createElement(d.a,{item:!0,xs:6},r.a.createElement(p.a,{variant:"contained",fullWidth:!0,style:{textTransform:"none"},color:!0===i?"default":"primary",onClick:function(){return u(!1)}},"All Users"))),r.a.createElement(d.a,{item:!0,xs:12,className:t.list,onScroll:function(e){!1===i&&function(e){var t=e.target,a=t.scrollTop;if(0===a)return;if(t.scrollHeight-t.scrollTop===t.clientHeight){console.log("scrolled down");var n=localStorage.getItem("token-".concat(O.email));ae(n,O),t.scrollTop=a}}(e)},style:{position:"fixed",marginTop:"80px",width:"33%"}},N?r.a.createElement("p",null,"Loading..."):""!==Y?r.a.createElement("p",null,"Error!!"):!0===i?r.a.createElement(je,{handleUser:_,userList:A,owner:O,needToShowChatBox:Object(B.isEmpty)(h)}):r.a.createElement(d.a,{container:!0,direction:"col"},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(pe,{handleUser:_,userList:A})),r.a.createElement(d.a,{item:!0,xs:12},P?r.a.createElement("p",null,"loading.."):r.a.createElement("p",null))))),r.a.createElement(d.a,{item:!0,xs:8},"   ",r.a.createElement(ie,{user:h,owner:O})))))}var Se=a(133),ke=a(134),Ae=a.n(ke),Ie=a(135),Ce=a.n(Ie),Te=a(264),Ne=a(258),Ue=a(21),De=Object(E.a)((function(e){return{root:{margin:e.spacing(0),maxHeight:"100%"},paper:{marginTop:"10%",marginBottom:"10%",marginLeft:"30%",marginRight:"30%",paddingBottom:"8px",paddingTop:"5px"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},list:{marginTop:e.spacing(0),maxHeight:"85vh",overflow:"auto"},option:{marginTop:e.spacing(2)},large:{width:e.spacing(10),height:e.spacing(10)},input:{display:"none"}}}));function Me(e){var t=De(),a=Object(w.g)(),c=Object(n.useState)([]),o=Object(l.a)(c,2),i=o[0],s=o[1],m=Object(n.useState)({}),f=Object(l.a)(m,2),g=(f[0],f[1],Object(n.useState)({})),E=Object(l.a)(g,2),v=(E[0],E[1],Object(n.useState)(!1)),O=Object(l.a)(v,2),x=(O[0],O[1],Object(n.useState)("")),y=Object(l.a)(x,2),S=(y[0],y[1],Object(n.useState)(!1)),k=Object(l.a)(S,2),A=k[0],I=k[1],C=Object(n.useState)({}),T=Object(l.a)(C,2),N=T[0],U=T[1];Object(n.useEffect)((function(){var e=a.location.state;console.log(e),U(e)}),[]),Object(n.useEffect)((function(){return a.listen((function(e){a.location.state={},console.log("action!!"),alert("action!"),"PUSH"===a.action&&s([e.key]),"POP"===a.action&&(console.log("back button is pressed"),i[1]===e.key?s((function(e){var t=Object(Se.a)(e);t[0];return t.slice(1)})):s((function(t){return[e.key].concat(Object(Q.a)(t))})))}))}),[i]);return Object(B.isEmpty)(N)||void 0===N?r.a.createElement("div",null,r.a.createElement(j.a,null,r.a.createElement("title",null," My Profile"))):r.a.createElement("div",null,r.a.createElement(j.a,null,r.a.createElement("title",null," My Profile")),r.a.createElement(G.a,{className:t.paper,elevation:3},r.a.createElement(d.a,{container:!0,direction:"col"},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(u.a,{alt:"Remy Sharp",src:"".concat("http://18.216.231.48:3001","/").concat(N.profilePicUrl),className:t.large,style:{display:"block",marginLeft:"auto",marginRight:"auto"}})),r.a.createElement(d.a,{item:!0,xs:12,style:{textAlign:"center"}},r.a.createElement(b.a,{variant:"h4",style:{fontWeight:"bold",fontSize:"32px"}},N.name)),r.a.createElement(d.a,{container:!0,item:!0,xs:12,direction:"row",style:{textAlign:"center",marginTop:"48px",height:"30px"}},r.a.createElement(d.a,{item:!0,xs:3,style:{textAlign:"center"}},r.a.createElement(h.a,{style:{}},r.a.createElement(Ae.a,{color:"primary"}))),r.a.createElement(d.a,{item:!0,xs:9},r.a.createElement(b.a,{style:{textAlign:"left"}},N.email))),r.a.createElement(d.a,{container:!0,item:!0,xs:12,direction:"row",style:{textAlign:"center"}},r.a.createElement(d.a,{item:!0,xs:3,style:{textAlign:"center"}},r.a.createElement(Ce.a,{color:"primary"})),r.a.createElement(d.a,{item:!0,xs:9},r.a.createElement(b.a,{style:{textAlign:"left"}},N.phoneNumber))),r.a.createElement(d.a,{item:!0,xs:12,style:{textAlign:"center"}},r.a.createElement(p.a,{variant:"contained",color:"primary",style:{width:"50%",marginTop:"10px"},onClick:function(){return I(!0)}},"Edit"),r.a.createElement(Pe,{profile:N,open:A,onClose:function(e){console.log("profile",e),I(!1),U(e)}})))))}function Pe(e){var t=De(),a=Object(Ue.a)(),c=Object(Ne.a)(a.breakpoints.down("sm")),o=Object(n.useState)({}),i=Object(l.a)(o,2),f=i[0],g=i[1],h=Object(n.useState)({}),b=Object(l.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)("".concat("http://18.216.231.48:3001","/").concat(e.profile.profilePicUrl)),j=Object(l.a)(O,2),y=j[0],w=j[1],S=Object(n.useState)(!1),k=Object(l.a)(S,2),A=k[0],I=k[1],C=Object(n.useState)(!1),T=Object(l.a)(C,2),N=T[0],U=T[1],D=Object(n.useState)(null),M=Object(l.a)(D,2),P=(M[0],M[1]);Object(n.useEffect)((function(){e.profile&&(g(e.profile),v(e.profile))}),[e.profile]),Object(n.useEffect)((function(){return function(){g({}),v({})}}),[]);var R=function(){var t=Object(m.a)(s.a.mark((function t(){var a,n,r,c,o,l,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat("http://18.216.231.48:3001","/api/v1"),n=localStorage.getItem("token-".concat(f.email)),r=localStorage.getItem("userId-".concat(f.email)),console.log(r),console.log(E),(c=new FormData).append("image",E.profilePicUrl),c.append("name",E.name),c.append("email",E.email),c.append("phoneNumber",E.phoneNumber),o={method:"PUT",url:"".concat(a,"/users/").concat(r,"/"),headers:{Authorization:"Bearer ".concat(n),"content-type":"multipart/form-data"},data:c},t.prev=11,I(!0),t.next=15,x()(o);case 15:(l=t.sent).data&&(I(!1),U(!1),i=l.data,console.log("profile updated sucessfully by data",i),e.onClose({name:i.name,email:i.email,phoneNumber:i.phoneNumber,profilePicUrl:i.profilePicUrl})),t.next=25;break;case 19:t.prev=19,t.t0=t.catch(11),I(!1),U(!1),console.log(t.t0),e.onClose(f);case 25:case"end":return t.stop()}}),t,null,[[11,19]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){!0===N&&R()}),[N]),r.a.createElement(Te.a,{onClose:function(){return e.onClose(f)},open:e.open,fullScreen:c},r.a.createElement(d.a,{container:!0,direction:"col",style:{marginTop:"10px",marginBottom:"5px"}},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(u.a,{alt:f.name,src:y,className:t.large,style:{display:"block",marginLeft:"auto",marginRight:"auto"}})),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement("input",{accept:"image/*",className:t.input,id:"img-upload",multiple:!0,type:"file",onChange:function(e){if(e.target.files&&e.target.files[0]){var t=e.target.files[0];v(Object(q.a)(Object(q.a)({},f),{},{profilePicUrl:t})),P(t),w(URL.createObjectURL(t))}}}),r.a.createElement("label",{htmlFor:"img-upload"},r.a.createElement(p.a,{variant:"outlined",color:"primary",component:"span",style:{marginTop:"10px",display:"block",marginLeft:"auto",marginRight:"auto",width:"20%",textAlign:"center"}},"Upload"))),r.a.createElement(d.a,{container:!0,item:!0,xs:12,direction:"col",spacing:2,style:{paddingTop:"20px",marginLeft:"10%",marginRight:"10%"}},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Re,{name:"Name",value:E.name,onEdit:function(e){return v(Object(q.a)(Object(q.a)({},E),{},{name:e}))}})),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Re,{name:"Email",value:E.email,onEdit:function(e){return v(Object(q.a)(Object(q.a)({},E),{},{email:e}))}})),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Re,{name:"Phone",value:E.phoneNumber,onEdit:function(e){return v(Object(q.a)(Object(q.a)({},E),{},{phoneNumber:e}))}}))),r.a.createElement(d.a,{item:!0,xs:12},!0===A?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(_.a,null)):r.a.createElement(d.a,{container:!0,spacing:3,style:{marginTop:"10px"},direction:"row"},r.a.createElement(d.a,{item:!0,xs:6,style:{textAlign:"center"}},r.a.createElement(p.a,{variant:"outlined",color:"primary",style:{},onClick:function(){return U(!0)}},"SAVE")),r.a.createElement(d.a,{item:!0,xs:6,style:{textAlign:"center"}},r.a.createElement(p.a,{variant:"outlined",style:{},onClick:function(){return e.onClose(f)}},"CANCEL"))))))}var Re=function(e){var t=Object(n.useState)(e.value),a=Object(l.a)(t,2);a[0],a[1];return void 0===e.value?r.a.createElement("p",null):r.a.createElement(d.a,{container:!0,item:!0,xs:12,style:{}},r.a.createElement(d.a,{item:!0,xs:2,style:{textAlign:"left",marginTop:"5px"}},r.a.createElement(b.a,{variant:"body1"},e.name)),r.a.createElement(d.a,{item:!0,xs:10,style:{textAlign:"left"}},r.a.createElement(g.a,{id:"outlined-basic",variant:"outlined",fullWidth:!0,disabled:!0,value:e.value+"  (disabled)",size:"small",onChange:function(t){return e.onEdit(t.target.value)}})))};function Le(e){var t=Object(n.useState)(e.time),a=Object(l.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){var t=setInterval((function(){return o(c-1)}),1e3);return 0===c&&(clearInterval(t),e.handleTime(c)),function(){clearInterval(t)}})),r.a.createElement("span",null,c)}var Qe=Object(E.a)((function(e){return{paper:{marginTop:e.spacing(10),alignItems:"center"},avatar:{width:e.spacing(10),height:e.spacing(10),margin:"auto"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function We(e){Qe();var t=Object(w.g)(),a=Object(n.useState)(""),c=Object(l.a)(a,2),o=(c[0],c[1],Object(n.useState)("")),i=Object(l.a)(o,2),u=(i[0],i[1],Object(n.useState)("")),h=Object(l.a)(u,2),E=h[0],v=h[1],O=Object(n.useState)(!1),y=Object(l.a)(O,2),S=y[0],k=y[1],I=Object(n.useState)({}),C=Object(l.a)(I,2),T=(C[0],C[1],Object(n.useState)({})),N=Object(l.a)(T,2),D=N[0],M=N[1],P=Object(n.useState)(!0),R=Object(l.a)(P,2),L=R[0],Q=R[1],W=Object(n.useState)(!0),G=Object(l.a)(W,2),Y=G[0],K=G[1],J=Object(n.useState)(""),z=Object(l.a)(J,2),F=z[0],V=z[1],X=Object(n.useState)(""),q=Object(l.a)(X,2),H=q[0],Z=q[1],$=function(e){0===e&&K(!1)};Object(n.useEffect)((function(){var e=t.location.state;M(e),console.log("sign up data: ",e)}),[]),Object(n.useEffect)((function(){Object(B.isEmpty)(D)||function(){var e=Object(m.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("http://18.216.231.48:3001","/api/v1"),a={method:"post",url:"".concat(t,"/auth/otps/request"),data:{email:D.email}},e.prev=2,e.next=5,x()(a);case 5:201===(n=e.sent).status&&V(n.data.id),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}()()}),[D]);var _=function(){var e=Object(m.a)(s.a.mark((function e(){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("http://18.216.231.48:3001","/api/v1"),n={method:"post",url:"".concat(a,"/users/"),data:D},e.prev=2,e.next=5,x()(n);case 5:r=e.sent,console.log(r.data),201===r.status&&t.push("/signin"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();function ee(){return(ee=Object(m.a)(s.a.mark((function e(t){var a,n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),U(!0)){e.next=3;break}return e.abrupt("return");case 3:return v(""),a="".concat("http://18.216.231.48:3001","/api/v1"),n={method:"post",url:"".concat(a,"/auth/otps/verify"),data:{id:F,otp:H}},k(!0),e.prev=7,e.next=10,x()(n);case 10:if(200!==(r=e.sent).status){e.next=15;break}return console.log(r.data),e.next=15,_();case 15:k(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(7),e.t0.response&&(console.log(e.t0.response),c=e.t0.response.data?e.t0.response.data:e.t0.response.statusText,v(c)),k(!1);case 22:case"end":return e.stop()}}),e,null,[[7,18]])})))).apply(this,arguments)}return Object(B.isEmpty)(D)?r.a.createElement("p",null):r.a.createElement("div",null,r.a.createElement(j.a,null,r.a.createElement("title",null," Email Verification")),r.a.createElement(f.a,null),r.a.createElement("div",{style:{marginTop:"10%",marginLeft:"30%",marginRight:"30%",backgroundColor:"white",border:"1px solid black",borderRadius:"8px"}},r.a.createElement(d.a,{container:!0,style:{padding:"20px"}},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(b.a,{variant:"h5"},"Enter the code from your email")),r.a.createElement(d.a,{item:!0,xs:12,style:{marginTop:"20px"}},r.a.createElement(b.a,{variant:"subtitle1"},"Let us know that this email address belongs to you. Enter the code from the email sent to ",r.a.createElement("span",{style:{fontWeight:"bold"}},D.email))),r.a.createElement(d.a,{container:!0,item:!0,xs:12,style:{margin:"auto"},spacing:1},r.a.createElement(d.a,{item:!0,xs:6},r.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,onChange:function(e){v("");var t=e.target.value;!1!==function(e){var t,a=Object(A.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(!(n>="0"&&n<="9"))return!1}}catch(r){a.e(r)}finally{a.f()}return!0}(t)?t.length>0?(Q(!1),Z(t)):Q(!0):v("OTP contains only digits")}})),r.a.createElement(d.a,{item:!0,xs:6,style:{margin:"auto"}},r.a.createElement(p.a,{variant:"contained",color:"primary",disabled:Y,style:{textTransform:"none"}},"Resend"),Y?r.a.createElement("span",null," after ",r.a.createElement(Le,{time:60,handleTime:$})," s"):r.a.createElement("span",null," now"))),E&&r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement("div",{style:{color:"red"}},E)),r.a.createElement(d.a,{item:!0,xs:12,style:{}},r.a.createElement(p.a,{variant:"contained",color:"primary",disabled:L,fullWidth:!0,style:{textTransform:"none"},onClick:function(e){return ee.apply(this,arguments)}},S?"Submitting..":"Submit")))))}var Be=function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(""),o=Object(l.a)(c,2),i=(o[0],o[1]);return r.a.createElement(y.a,null,r.a.createElement("div",null,r.a.createElement(w.d,null,r.a.createElement(w.b,{path:"/signin"},r.a.createElement(P,{handleUser:function(e){var t=e.profile;t.profilePic=e.profile.name,a(t),i(e.accessToken)}})),r.a.createElement(w.b,{path:"/signup",exact:!0},r.a.createElement(L,null)),r.a.createElement(w.b,{path:"/signup/email-verify"},r.a.createElement(We,null)),r.a.createElement(w.b,{path:"/",exact:!0},r.a.createElement(L,null)),r.a.createElement(w.b,{path:"/home",exact:!0},r.a.createElement(we,null)),r.a.createElement(w.b,{path:"/profile"},r.a.createElement(Me,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));console.log=function(){},o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(Be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[153,1,2]]]);
//# sourceMappingURL=main.94f6a505.chunk.js.map